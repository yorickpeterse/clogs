import std.env
import std.test.(Filter, Tests)

import clogs.test_changelog
import clogs.test_cli
import clogs.test_config
import clogs.test_git
import clogs.test_patches
import clogs.test_version

class async Main {
  fn async main {
    let tests = Tests.new

    test_changelog.tests(tests)
    test_cli.tests(tests)
    test_config.tests(tests)
    test_git.tests(tests)
    test_patches.tests(tests)
    test_version.tests(tests)

    tests.filter = Filter.from_string(env.arguments.opt(0).unwrap_or(''))
    tests.run
  }
}
